/*!
 * Copyright (c) 2014 Stefan Aichholzer <theaichholzer@gmail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
'use strict';var salvus={extraho:function(e){var t,r=e.match(/\[([^\]]+)]|\(([^)]+)\)|{([^}]+)}/);return r&&(t={semita:e.substr(0,e.search(/\(|\[|\{/)).split("."),elementum:{}},r=(r[1]||r[2]||r[3]).split(","),r.forEach(function(e){e=e.trim().split(":"),t.elementum[e[0]]=e[1]})),t},noto:function(e){if(!e)return this;var t,r,n=this;return e=Array.isArray(e)?e:e.split(),e.forEach(function(e){r=salvus.extraho(e),r?t=r.semita:(e=e.split(":"),t=e[0].split("."));for(var l=0;l<t.length-1;++l)n[t[l]]||(n[t[l]]={}),n=n[t[l]];if(r){n[t[t.length-1]]=n[t[t.length-1]]||{};for(var u in r.elementum)r.elementum.hasOwnProperty(u)&&(r.elementum[u]="true"===r.elementum[u]?!0:"false"===r.elementum[u]?!1:r.elementum[u],n[t[t.length-1]][u]=r.elementum[u])}else e[1]="true"===e[1]?!0:"false"===e[1]?!1:e[1],n[t[t.length-1]]=e[1]}),this},lego:function(e,t,r,n){if(!e)return void 0;for(var l,u=this,o=e.split("."),i=0;i<o.length;++i){if(null===u[o[i]])return l=r?u[o[i]]||!1:null,null===l?l:t?(n||"!!")+o[i]:void 0;if(!r&&"boolean"==typeof u[o[i]]&&u[o[i]]===!1)return t?(n||"!!")+o[i]:!1;if(l=u[o[i].trim()],l=r?l||!1:l||null===l?l:!1,!l&&null!==l)return t?(n||"!!")+o[i]:void 0;u=l}return l},erado:function(e){return e?this.noto(e).purgo(!1,!0):this},purgo:function(e,t){var r,n,l,u,o=e||this;for(var i in o)if(o.hasOwnProperty(i))if(r=Array.isArray(o[i]),n=r&&0===o[i].length,l=!r&&o[i]&&"object"==typeof o[i],u=l&&0===Object.keys(o[i]).length,l&&!u)salvus.purgo(o[i],t);else if(!o[i]||n||u){if(t&&null===o[i])continue;delete o[i],salvus.purgo(o,t)}return o}};module.exports=function(){Object.defineProperties(Object.prototype,{noto:{configurable:!0,enumerable:!1,value:salvus.noto},lego:{configurable:!0,enumerable:!1,value:salvus.lego},erado:{configurable:!0,enumerable:!1,value:salvus.erado},purgo:{configurable:!0,enumerable:!1,value:salvus.purgo}})}();